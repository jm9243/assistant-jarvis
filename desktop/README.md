# åŠ©æ‰‹Â·è´¾ç»´æ–¯ Desktop

> åŸºäº Tauri 2 + React 18 + Python FastAPI çš„æ™ºèƒ½æ¡Œé¢åŠ©æ‰‹

## ğŸ“– æ¦‚è¿°

åŠ©æ‰‹Â·è´¾ç»´æ–¯æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ¡Œé¢ç«¯åº”ç”¨ï¼Œæä¾› RPA å·¥ä½œæµè‡ªåŠ¨åŒ–ã€Agent ç®¡ç†ã€çŸ¥è¯†åº“ç®¡ç†ç­‰åŠŸèƒ½ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- **å·¥ä½œæµè‡ªåŠ¨åŒ–**ï¼š23ç§èŠ‚ç‚¹ç±»å‹ï¼Œæ”¯æŒ UI è‡ªåŠ¨åŒ–ã€æµç¨‹æ§åˆ¶ã€æ–‡ä»¶æ“ä½œç­‰
- **æ™ºèƒ½å½•åˆ¶å™¨**ï¼šè‡ªåŠ¨æ•è·ç”¨æˆ·æ“ä½œå¹¶ç”Ÿæˆå·¥ä½œæµ
- **Agent ç®¡ç†**ï¼šåˆ›å»ºå’Œç®¡ç†å¤šä¸ª AI Agent
- **çŸ¥è¯†åº“ç³»ç»Ÿ**ï¼šç®¡ç†æ–‡æ¡£å’ŒçŸ¥è¯†åº“
- **å¯è§†åŒ–è®¾è®¡å™¨**ï¼šåŸºäº React Flow çš„æ‹–æ‹½å¼å·¥ä½œæµç¼–è¾‘å™¨
- **å®æ—¶é€šä¿¡**ï¼šWebSocket å®æ—¶çŠ¶æ€æ›´æ–°
- **ç³»ç»Ÿç›‘æ§**ï¼šCPU/å†…å­˜ç›‘æ§ã€æ—¥å¿—ç®¡ç†
- **å‹å¥½é”™è¯¯æç¤º**ï¼šè¿æ¥å¤±è´¥æ—¶è‡ªåŠ¨æ˜¾ç¤ºè§£å†³æ–¹æ¡ˆ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

**å¼€å‘ç¯å¢ƒ**
- Node.js >= 18.0
- Python >= 3.10
- Rust (ç”¨äºæ„å»º Tauri)

**æœ€ä½é…ç½®**
- CPU: åŒæ ¸å¤„ç†å™¨
- å†…å­˜: 4GB RAM
- å­˜å‚¨: 500MB å¯ç”¨ç©ºé—´
- ç³»ç»Ÿ: macOS 10.15+ / Windows 10+ / Linux

### å¼€å‘æ¨¡å¼

```bash
cd desktop
npm install  # é¦–æ¬¡è¿è¡Œ
npm start    # è‡ªåŠ¨å¯åŠ¨å¼•æ“å’Œå‰ç«¯
```

è®¿é—®åœ°å€ï¼š
- å‰ç«¯åº”ç”¨: http://localhost:1420
- åç«¯ API: http://localhost:8000
- API æ–‡æ¡£: http://localhost:8000/docs

### æ•…éšœæ’é™¤

**å¼•æ“å¯åŠ¨å¤±è´¥**
```bash
cd engine
python3 --version  # ç¡®ä¿ 3.10+
pip3 install -r requirements.txt
python3 main.py
```

**ç«¯å£è¢«å ç”¨**
```bash
lsof -i:8000  # æŸ¥çœ‹å ç”¨
lsof -i:1420
```

## ğŸ“¦ æ‰“åŒ…å‘å¸ƒ

### å®Œæ•´æ‰“åŒ…ï¼ˆæ¨èç”Ÿäº§ï¼‰

```bash
cd desktop
npm run bundle  # åŒ…å«Pythonå¼•æ“ï¼Œç”¨æˆ·æ— éœ€å®‰è£…Python
```

æ‰“åŒ…æ—¶é—´çº¦10åˆ†é’Ÿï¼Œç”Ÿæˆå¼€ç®±å³ç”¨çš„å®‰è£…åŒ…ï¼ˆ~200MBï¼‰

### å¿«é€Ÿæ‰“åŒ…ï¼ˆå¼€å‘æµ‹è¯•ï¼‰

```bash
cd desktop/frontend/src-tauri
./build-simple.sh  # ä¸åŒ…å«Pythonå¼•æ“ï¼Œéœ€è¦ç”¨æˆ·å®‰è£…Python 3.10+
```

æ‰“åŒ…æ—¶é—´çº¦2åˆ†é’Ÿï¼Œå®‰è£…åŒ…è¾ƒå°ï¼ˆ~50MBï¼‰

### è¾“å‡ºä½ç½®

- **macOS**: `target/release/bundle/dmg/åŠ©æ‰‹Â·è´¾ç»´æ–¯_1.0.0_aarch64.dmg`
- **Windows**: `target/release/bundle/msi/åŠ©æ‰‹Â·è´¾ç»´æ–¯_1.0.0_x64_en-US.msi`
- **Linux**: `target/release/bundle/deb/jarvis-desktop_1.0.0_amd64.deb`

## ğŸ“ é¡¹ç›®ç»“æ„

```
desktop/
â”œâ”€â”€ engine/                    # Python åç«¯å¼•æ“
â”‚   â”œâ”€â”€ api/                   # FastAPI è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ server.py         # æœåŠ¡å™¨é…ç½®
â”‚   â”‚   â””â”€â”€ routes/           # API è·¯ç”±
â”‚   â”œâ”€â”€ core/                  # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ workflow/         # å·¥ä½œæµæ‰§è¡Œå¼•æ“
â”‚   â”‚   â”‚   â”œâ”€â”€ executor.py   # æ‰§è¡Œå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ nodes.py      # èŠ‚ç‚¹æ³¨å†Œè¡¨
â”‚   â”‚   â”‚   â””â”€â”€ nodes_impl.py # 23ç§èŠ‚ç‚¹å®ç°
â”‚   â”‚   â””â”€â”€ recorder/         # å½•åˆ¶å™¨æœåŠ¡
â”‚   â”‚       â””â”€â”€ service.py    # å½•åˆ¶æœåŠ¡
â”‚   â”œâ”€â”€ tools/                 # å·¥å…·é›†
â”‚   â”‚   â””â”€â”€ gui/              # GUI è‡ªåŠ¨åŒ–
â”‚   â”‚       â””â”€â”€ locator.py    # å…ƒç´ å®šä½å™¨
â”‚   â”œâ”€â”€ models/                # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ main.py               # å…¥å£æ–‡ä»¶
â”‚
â”œâ”€â”€ frontend/                  # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/       # ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ workflow/     # å·¥ä½œæµç»„ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ NodeLibraryPanel.tsx  # èŠ‚ç‚¹åº“
â”‚   â”‚   â”‚       â””â”€â”€ NodeInspector.tsx     # èŠ‚ç‚¹é…ç½®
â”‚   â”‚   â”œâ”€â”€ pages/            # é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ Workflow/     # å·¥ä½œæµé¡µé¢
â”‚   â”‚   â”‚       â””â”€â”€ WorkflowDesignerPage.tsx
â”‚   â”‚   â”œâ”€â”€ services/         # æœåŠ¡å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts        # HTTP API
â”‚   â”‚   â”‚   â”œâ”€â”€ websocket.ts  # WebSocket
â”‚   â”‚   â”‚   â””â”€â”€ tauri.ts      # Tauri å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ stores/           # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ types/            # ç±»å‹å®šä¹‰
â”‚   â”‚       â”œâ”€â”€ index.ts
â”‚   â”‚       â””â”€â”€ nodes.ts      # èŠ‚ç‚¹å®šä¹‰
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ docs/                      # æ–‡æ¡£
â”œâ”€â”€ start-dev.sh              # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ test-api.sh               # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ QUICK_START.md            # å¿«é€Ÿå¯åŠ¨
â”œâ”€â”€ IMPLEMENTATION_STATUS.md  # å®ç°çŠ¶æ€
â”œâ”€â”€ COMPLETION_SUMMARY.md     # å®Œæˆæ€»ç»“
â””â”€â”€ README.md                 # æœ¬æ–‡ä»¶
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. å·¥ä½œæµè®¾è®¡å™¨

åŸºäº React Flow çš„å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘å™¨ï¼š

- æ‹–æ‹½å¼èŠ‚ç‚¹æ·»åŠ 
- èŠ‚ç‚¹è¿æ¥å’Œé…ç½®
- å®æ—¶é¢„è§ˆ
- æ’¤é”€/é‡åš
- å¯¼å…¥/å¯¼å‡º

### 2. æ™ºèƒ½å½•åˆ¶å™¨

è‡ªåŠ¨æ•è·ç”¨æˆ·æ“ä½œï¼š

- é¼ æ ‡ç‚¹å‡»/ç§»åŠ¨
- é”®ç›˜è¾“å…¥
- å…ƒç´ è¯†åˆ«
- è‡ªåŠ¨ç”ŸæˆèŠ‚ç‚¹

### 3. èŠ‚ç‚¹æ‰§è¡Œå™¨

23ç§èŠ‚ç‚¹ç±»å‹ï¼š

**UI è‡ªåŠ¨åŒ– (7ä¸ª)**
- Click - ç‚¹å‡»å…ƒç´ 
- Input - è¾“å…¥æ–‡æœ¬
- Drag & Drop - æ‹–æ‹½å…ƒç´ 
- Scroll - æ»šåŠ¨é¡µé¢
- Hover - é¼ æ ‡æ‚¬åœ
- Keyboard - é”®ç›˜æŒ‰é”®
- Delay - å»¶è¿Ÿç­‰å¾…

**æµç¨‹æ§åˆ¶ (3ä¸ª)**
- Variable - å˜é‡æ“ä½œ
- Compare - æ¡ä»¶æ¯”è¾ƒ
- Data Extract - æ•°æ®æå–

**é›†æˆ (2ä¸ª)**
- HTTP Request - HTTP è¯·æ±‚
- Subworkflow - å­å·¥ä½œæµ

**æ–‡ä»¶æ“ä½œ (2ä¸ª)**
- File Selector - æ–‡ä»¶é€‰æ‹©
- File Operation - æ–‡ä»¶æ“ä½œ

**ç³»ç»Ÿæ“ä½œ (3ä¸ª)**
- Clipboard - å‰ªè´´æ¿
- Shell Command - Shell å‘½ä»¤
- App Control - åº”ç”¨æ§åˆ¶

### 4. å…ƒç´ å®šä½å™¨

å¤šç­–ç•¥å…ƒç´ å®šä½ï¼š

1. **AXUI å®šä½**ï¼ˆä¼˜å…ˆï¼‰- ä½¿ç”¨ç³»ç»Ÿè¾…åŠ©åŠŸèƒ½ API
2. **OCR å®šä½**ï¼ˆå¤‡é€‰ï¼‰- æ–‡å­—è¯†åˆ«å®šä½
3. **å›¾åƒåŒ¹é…**ï¼ˆå¤‡é€‰ï¼‰- æ¨¡æ¿åŒ¹é…
4. **åæ ‡å®šä½**ï¼ˆå…œåº•ï¼‰- ç»å¯¹åæ ‡

### 5. å·¥ä½œæµæ‰§è¡Œ

å¼ºå¤§çš„æ‰§è¡Œå¼•æ“ï¼š

- æ‹“æ‰‘æ’åºæ‰§è¡Œ
- å¼‚æ­¥å¹¶å‘æ”¯æŒ
- æš‚åœ/æ¢å¤/å–æ¶ˆ
- å®æ—¶æ—¥å¿—æ¨é€
- é”™è¯¯å¤„ç†å’Œé‡è¯•
- å˜é‡ä½œç”¨åŸŸç®¡ç†

## ğŸ”§ å¼€å‘

### æ·»åŠ æ–°èŠ‚ç‚¹

1. åœ¨ `engine/core/workflow/nodes_impl.py` ä¸­å®ç°èŠ‚ç‚¹æ‰§è¡Œå™¨ï¼š

```python
class MyNodeExecutor(NodeExecutor):
    async def execute(self, node: Node, context: Any) -> Any:
        # å®ç°èŠ‚ç‚¹é€»è¾‘
        pass
```

2. åœ¨ `engine/core/workflow/nodes.py` ä¸­æ³¨å†ŒèŠ‚ç‚¹ï¼š

```python
self.register("my_node", MyNodeExecutor)
```

3. åœ¨ `frontend/src/types/nodes.ts` ä¸­æ·»åŠ èŠ‚ç‚¹å®šä¹‰ï¼š

```typescript
{
  type: 'my_node',
  category: 'ui_automation',
  label: 'My Node',
  icon: 'ğŸ¯',
  description: 'æˆ‘çš„èŠ‚ç‚¹',
  defaultConfig: {},
  configSchema: []
}
```

### è°ƒè¯•

```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f ~/.jarvis/logs/engine.log

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
# æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°

# æµ‹è¯• API
curl http://localhost:8000/docs
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

- **å¯åŠ¨æ—¶é—´**: < 3ç§’
- **å†…å­˜å ç”¨**: < 200MBï¼ˆç©ºé—²ï¼‰
- **æ‰§è¡Œå»¶è¿Ÿ**: < 100msï¼ˆèŠ‚ç‚¹é—´ï¼‰
- **WebSocket å»¶è¿Ÿ**: < 50ms

## ğŸ”§ API è·¯ç”±è¯´æ˜

ç³»ç»Ÿé‡‡ç”¨æ··åˆæ¶æ„ï¼š

**Python å¼•æ“ (localhost:8000)** - æœ¬åœ°æ‰§è¡Œ
- å·¥ä½œæµæ‰§è¡Œã€Agentå¯¹è¯ã€çŸ¥è¯†åº“æœç´¢
- å½•åˆ¶å™¨ã€ç³»ç»Ÿç›‘æ§ã€å®æ—¶é€šä¿¡

**äº‘æœåŠ¡ (localhost:8080)** - æ•°æ®åŒæ­¥
- ç”¨æˆ·è®¤è¯ã€å·¥ä½œæµå­˜å‚¨ã€æ–‡ä»¶ä¸Šä¼ 
- è·¨è®¾å¤‡åŒæ­¥ã€ç»Ÿè®¡åˆ†æ

## ğŸ› å¸¸è§é—®é¢˜

**404 é”™è¯¯** - æ£€æŸ¥å¼•æ“æ˜¯å¦è¿è¡Œ
```bash
lsof -i:8000
curl http://localhost:8000/health
```

**å¼•æ“å¯åŠ¨å¤±è´¥** - æ£€æŸ¥Pythonç¯å¢ƒ
```bash
python3 --version  # éœ€è¦ 3.10+
pip3 install -r engine/requirements.txt
```

**æ‰“åŒ…å¤±è´¥** - æ¸…ç†ç¼“å­˜
```bash
cd desktop/frontend/src-tauri
cargo clean && ./build-simple.sh
```

**macOSæƒé™** - ç³»ç»Ÿåå¥½è®¾ç½® â†’ å®‰å…¨æ€§ä¸éšç§ â†’ è¾…åŠ©åŠŸèƒ½

## ğŸ“ å¼€å‘

### æ·»åŠ æ–°èŠ‚ç‚¹
1. `engine/core/workflow/nodes_impl.py` - å®ç°æ‰§è¡Œå™¨
2. `engine/core/workflow/nodes.py` - æ³¨å†ŒèŠ‚ç‚¹
3. `frontend/src/types/nodes.ts` - æ·»åŠ å®šä¹‰

### æ€§èƒ½æŒ‡æ ‡
- å¯åŠ¨æ—¶é—´ < 3ç§’
- å†…å­˜å ç”¨ < 200MBï¼ˆç©ºé—²ï¼‰
- APIå“åº” < 200ms (P95)
- UIå“åº” < 100ms

## ğŸ“„ è®¸å¯è¯

MIT License

---

**Made with â¤ï¸ by Jarvis Team**
