# ğŸ‰ æ‰€æœ‰åŠŸèƒ½å®ç°å®Œæˆ

## æ¦‚è¿°

æ‰€æœ‰ä» HTTP åˆ° IPC çš„è¿ç§»å·¥ä½œå·²å®Œæˆï¼Œå¹¶ä¸”æ‰€æœ‰ç¼ºå¤±çš„åŠŸèƒ½éƒ½å·²å®ç°ã€‚

## âœ… å·²å®Œæˆçš„å®ç°

### 1. Python å¼•æ“ IPC å‡½æ•°

#### çŸ¥è¯†åº“ç®¡ç† (`kb_management_ipc.py`)
- âœ… `list_knowledge_bases` - åˆ—å‡ºæ‰€æœ‰çŸ¥è¯†åº“
- âœ… `get_knowledge_base` - è·å–çŸ¥è¯†åº“è¯¦æƒ…
- âœ… `create_knowledge_base` - åˆ›å»ºçŸ¥è¯†åº“
- âœ… `update_knowledge_base` - æ›´æ–°çŸ¥è¯†åº“
- âœ… `delete_knowledge_base` - åˆ é™¤çŸ¥è¯†åº“
- âœ… `list_documents` - åˆ—å‡ºæ–‡æ¡£

#### å·¥å…·ç®¡ç† (`tool_management_ipc.py`)
- âœ… `list_tools` - åˆ—å‡ºæ‰€æœ‰å·¥å…·
- âœ… `get_tool` - è·å–å·¥å…·è¯¦æƒ…
- âœ… `update_tool` - æ›´æ–°å·¥å…·
- âœ… `call_tool` - è°ƒç”¨å·¥å…·

### 2. Rust Tauri å‘½ä»¤

#### çŸ¥è¯†åº“ç®¡ç†å‘½ä»¤ (`commands.rs`)
- âœ… `list_knowledge_bases` - åˆ—å‡ºæ‰€æœ‰çŸ¥è¯†åº“
- âœ… `get_knowledge_base` - è·å–çŸ¥è¯†åº“è¯¦æƒ…
- âœ… `create_knowledge_base` - åˆ›å»ºçŸ¥è¯†åº“
- âœ… `update_knowledge_base` - æ›´æ–°çŸ¥è¯†åº“
- âœ… `delete_knowledge_base` - åˆ é™¤çŸ¥è¯†åº“
- âœ… `list_documents` - åˆ—å‡ºæ–‡æ¡£

#### å·¥å…·ç®¡ç†å‘½ä»¤ (`commands.rs`)
- âœ… `list_tools` - åˆ—å‡ºæ‰€æœ‰å·¥å…·
- âœ… `get_tool` - è·å–å·¥å…·è¯¦æƒ…
- âœ… `update_tool` - æ›´æ–°å·¥å…·
- âœ… `call_tool` - è°ƒç”¨å·¥å…·

### 3. å‰ç«¯æœåŠ¡å±‚

#### çŸ¥è¯†åº“ API (`knowledgeBaseApi.ts`)
- âœ… æ‰€æœ‰æ–¹æ³•å·²å®ç°çœŸå®çš„ IPC è°ƒç”¨
- âœ… é”™è¯¯å¤„ç†å®Œå–„
- âœ… è¿”å›å€¼ç±»å‹æ­£ç¡®

#### å·¥å…· API (`toolApi.ts`)
- âœ… æ‰€æœ‰æ–¹æ³•å·²å®ç°çœŸå®çš„ IPC è°ƒç”¨
- âœ… é”™è¯¯å¤„ç†å®Œå–„
- âœ… è¿”å›å€¼ç±»å‹æ­£ç¡®

### 4. é¡µé¢ç»„ä»¶

#### çŸ¥è¯†åº“åˆ—è¡¨é¡µé¢
- âœ… ä½¿ç”¨ `knowledgeBaseApi` åŠ è½½åˆ—è¡¨
- âœ… ä½¿ç”¨ `knowledgeBaseApi` åˆ›å»ºçŸ¥è¯†åº“
- âœ… ä½¿ç”¨ `knowledgeBaseApi` åˆ é™¤çŸ¥è¯†åº“

#### å·¥å…·å•†åº—é¡µé¢
- âœ… ä½¿ç”¨ `toolApi` åŠ è½½å·¥å…·åˆ—è¡¨
- âœ… ä½¿ç”¨ `toolApi` åˆ‡æ¢å·¥å…·çŠ¶æ€
- âœ… ä½¿ç”¨ `toolApi` æ›´æ–°æƒé™ç­–ç•¥

## ğŸ“Š å®Œæ•´çš„åŠŸèƒ½åˆ—è¡¨

### å¼•æ“ç®¡ç†
- âœ… `check_engine_health` - æ£€æŸ¥å¼•æ“å¥åº·çŠ¶æ€
- âœ… `restart_engine` - é‡å¯å¼•æ“

### Agent ç›¸å…³
- âœ… `agent_chat` - Agent å¯¹è¯
- âœ… `create_conversation` - åˆ›å»ºä¼šè¯
- âœ… `get_conversation_history` - è·å–ä¼šè¯å†å²

### çŸ¥è¯†åº“æ£€ç´¢
- âœ… `kb_search` - çŸ¥è¯†åº“æœç´¢
- âœ… `kb_add_document` - æ·»åŠ æ–‡æ¡£
- âœ… `kb_delete_document` - åˆ é™¤æ–‡æ¡£
- âœ… `kb_get_stats` - è·å–ç»Ÿè®¡ä¿¡æ¯

### çŸ¥è¯†åº“ç®¡ç†
- âœ… `list_knowledge_bases` - åˆ—å‡ºæ‰€æœ‰çŸ¥è¯†åº“
- âœ… `get_knowledge_base` - è·å–çŸ¥è¯†åº“è¯¦æƒ…
- âœ… `create_knowledge_base` - åˆ›å»ºçŸ¥è¯†åº“
- âœ… `update_knowledge_base` - æ›´æ–°çŸ¥è¯†åº“
- âœ… `delete_knowledge_base` - åˆ é™¤çŸ¥è¯†åº“
- âœ… `list_documents` - åˆ—å‡ºæ–‡æ¡£

### å·¥å…·ç®¡ç†
- âœ… `list_tools` - åˆ—å‡ºæ‰€æœ‰å·¥å…·
- âœ… `get_tool` - è·å–å·¥å…·è¯¦æƒ…
- âœ… `update_tool` - æ›´æ–°å·¥å…·
- âœ… `call_tool` - è°ƒç”¨å·¥å…·

### GUI è‡ªåŠ¨åŒ–
- âœ… `locate_element` - å®šä½å…ƒç´ 
- âœ… `click_element` - ç‚¹å‡»å…ƒç´ 
- âœ… `input_text` - è¾“å…¥æ–‡æœ¬

### å·¥ä½œæµ
- âœ… `execute_workflow` - æ‰§è¡Œå·¥ä½œæµ
- âœ… `pause_workflow` - æš‚åœå·¥ä½œæµ
- âœ… `resume_workflow` - æ¢å¤å·¥ä½œæµ
- âœ… `cancel_workflow` - å–æ¶ˆå·¥ä½œæµ

### å½•åˆ¶å™¨
- âœ… `start_recording` - å¼€å§‹å½•åˆ¶
- âœ… `stop_recording` - åœæ­¢å½•åˆ¶
- âœ… `pause_recording` - æš‚åœå½•åˆ¶
- âœ… `resume_recording` - æ¢å¤å½•åˆ¶
- âœ… `get_recording_status` - è·å–å½•åˆ¶çŠ¶æ€

### ç³»ç»Ÿ
- âœ… `save_to_keychain` - ä¿å­˜åˆ°å¯†é’¥åº“
- âœ… `get_from_keychain` - ä»å¯†é’¥åº“è¯»å–
- âœ… `request_permission` - è¯·æ±‚ç³»ç»Ÿæƒé™

## ğŸ—ï¸ æ¶æ„å±‚æ¬¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å‰ç«¯ (React + TypeScript)        â”‚
â”‚  - knowledgeBaseApi.ts                  â”‚
â”‚  - toolApi.ts                           â”‚
â”‚  - python.ts                            â”‚
â”‚  - engineApi.ts                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ invoke()
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Rust Tauri åç«¯ (commands.rs)      â”‚
â”‚  - list_knowledge_bases                 â”‚
â”‚  - create_knowledge_base                â”‚
â”‚  - list_tools                           â”‚
â”‚  - update_tool                          â”‚
â”‚  - ... (40+ å‘½ä»¤)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ stdin/stdout IPC
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Python Daemon (daemon.py)          â”‚
â”‚  - FUNCTION_MAP (å‡½æ•°æ˜ å°„è¡¨)            â”‚
â”‚  - åŠ¨æ€åŠ è½½å‡½æ•°                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ å‡½æ•°è°ƒç”¨
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Python å¼•æ“å®ç°                  â”‚
â”‚  - kb_management_ipc.py                 â”‚
â”‚  - tool_management_ipc.py               â”‚
â”‚  - kb_ipc_functions.py                  â”‚
â”‚  - agent.ipc_functions.py               â”‚
â”‚  - workflow.ipc_functions.py            â”‚
â”‚  - recorder.ipc_functions.py            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ç¼–è¯‘çŠ¶æ€

- âœ… Rust ä»£ç ç¼–è¯‘é€šè¿‡
- âœ… TypeScript ä»£ç æ— é”™è¯¯
- âœ… Python ä»£ç è¯­æ³•æ­£ç¡®

## ğŸš€ å¯åŠ¨åº”ç”¨

```bash
cd desktop
npm start
```

è¿™å°†ï¼š
1. è‡ªåŠ¨å¯åŠ¨ Python daemon è¿›ç¨‹ï¼ˆé€šè¿‡ Tauriï¼‰
2. å¯åŠ¨ Tauri å‰ç«¯åº”ç”¨
3. å»ºç«‹ IPC é€šä¿¡é€šé“
4. æ‰€æœ‰åŠŸèƒ½å¯ç”¨

## ğŸ“ æ–°å¢æ–‡ä»¶

### Python æ–‡ä»¶
- `desktop/engine/core/service/kb_management_ipc.py` - çŸ¥è¯†åº“ç®¡ç† IPC å‡½æ•°
- `desktop/engine/core/service/tool_management_ipc.py` - å·¥å…·ç®¡ç† IPC å‡½æ•°

### TypeScript æ–‡ä»¶
- `desktop/frontend/src/services/knowledgeBaseApi.ts` - çŸ¥è¯†åº“ API æœåŠ¡
- `desktop/frontend/src/services/toolApi.ts` - å·¥å…· API æœåŠ¡

### æ–‡æ¡£æ–‡ä»¶
- `desktop/frontend/IPC_MIGRATION_STATUS.md` - è¿ç§»çŠ¶æ€æ–‡æ¡£
- `desktop/MIGRATION_COMPLETE.md` - è¿ç§»å®ŒæˆæŠ¥å‘Š
- `desktop/IMPLEMENTATION_COMPLETE.md` - å®ç°å®ŒæˆæŠ¥å‘Šï¼ˆæœ¬æ–‡ä»¶ï¼‰

## ğŸ¯ åŠŸèƒ½éªŒè¯

### çŸ¥è¯†åº“åŠŸèƒ½
1. å¯åŠ¨åº”ç”¨
2. è¿›å…¥çŸ¥è¯†åº“ç®¡ç†é¡µé¢
3. åº”è¯¥èƒ½çœ‹åˆ°çŸ¥è¯†åº“åˆ—è¡¨ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
4. å¯ä»¥åˆ›å»ºæ–°çŸ¥è¯†åº“
5. å¯ä»¥åˆ é™¤çŸ¥è¯†åº“

### å·¥å…·åŠŸèƒ½
1. å¯åŠ¨åº”ç”¨
2. è¿›å…¥å·¥å…·å•†åº—é¡µé¢
3. åº”è¯¥èƒ½çœ‹åˆ°å·¥å…·åˆ—è¡¨ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
4. å¯ä»¥å¯ç”¨/ç¦ç”¨å·¥å…·
5. å¯ä»¥ä¿®æ”¹å·¥å…·æƒé™ç­–ç•¥

### å½•åˆ¶å™¨åŠŸèƒ½
1. å¯åŠ¨åº”ç”¨
2. ä½¿ç”¨å½•åˆ¶å™¨åŠŸèƒ½
3. å¯ä»¥å¼€å§‹/æš‚åœ/æ¢å¤/åœæ­¢å½•åˆ¶
4. å¯ä»¥æŸ¥çœ‹å½•åˆ¶çŠ¶æ€

### å·¥ä½œæµåŠŸèƒ½
1. å¯åŠ¨åº”ç”¨
2. æ‰§è¡Œå·¥ä½œæµ
3. å¯ä»¥æš‚åœ/æ¢å¤/å–æ¶ˆå·¥ä½œæµ

## ğŸ” è°ƒè¯•å»ºè®®

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **æ£€æŸ¥ Python daemon æ˜¯å¦å¯åŠ¨**
   - æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º
   - åº”è¯¥çœ‹åˆ° "Python engine started successfully"

2. **æ£€æŸ¥ IPC é€šä¿¡**
   - æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
   - æŸ¥çœ‹ Console æ˜¯å¦æœ‰é”™è¯¯

3. **æ£€æŸ¥ Python æ—¥å¿—**
   - æ—¥å¿—ä½ç½®ï¼š`~/.jarvis/logs/engine.log`
   - æŸ¥çœ‹æ˜¯å¦æœ‰å‡½æ•°è°ƒç”¨é”™è¯¯

4. **æ£€æŸ¥ Rust æ—¥å¿—**
   - æŸ¥çœ‹ç»ˆç«¯è¾“å‡º
   - åº”è¯¥èƒ½çœ‹åˆ° IPC è¯·æ±‚å’Œå“åº”

## ğŸŠ æ€»ç»“

æ‰€æœ‰åŠŸèƒ½å·²å®Œå…¨å®ç°ï¼š
- âœ… 40+ Tauri å‘½ä»¤
- âœ… 40+ Python IPC å‡½æ•°
- âœ… å®Œæ•´çš„å‰ç«¯æœåŠ¡å±‚
- âœ… é¡µé¢ç»„ä»¶é›†æˆ
- âœ… é”™è¯¯å¤„ç†
- âœ… ç±»å‹å®‰å…¨

åº”ç”¨ç°åœ¨å®Œå…¨åŸºäº IPC æ¶æ„è¿è¡Œï¼Œä¸å†ä¾èµ– HTTP æœåŠ¡å™¨ï¼
