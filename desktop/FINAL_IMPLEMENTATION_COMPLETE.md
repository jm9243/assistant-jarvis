# ğŸ‰ å®Œæ•´å®ç°å®ŒæˆæŠ¥å‘Š

## æ¦‚è¿°

æ‰€æœ‰åŠŸèƒ½å·²å®Œæ•´å®ç°ï¼Œä»å‰ç«¯åˆ°åç«¯å…¨é“¾è·¯æ‰“é€šã€‚

## âœ… å·²å®Œæˆçš„å®ç°

### 1. æ•°æ®æŒä¹…åŒ–å±‚
**æ–°å¢æ–‡ä»¶**: `desktop/engine/core/storage/simple_db.py`
- ä½¿ç”¨ JSON æ–‡ä»¶å­˜å‚¨æ•°æ®
- æ”¯æŒ Agentã€çŸ¥è¯†åº“ã€å·¥å…·çš„ CRUD æ“ä½œ
- è‡ªåŠ¨ä¿å­˜å’ŒåŠ è½½
- æ•°æ®å­˜å‚¨ä½ç½®ï¼š`~/.jarvis/data/db.json`

### 2. ç¤ºä¾‹æ•°æ®åˆå§‹åŒ–
**æ–°å¢æ–‡ä»¶**: `desktop/engine/core/storage/init_data.py`
- è‡ªåŠ¨åˆ›å»ºç¤ºä¾‹ Agentï¼ˆé€šç”¨åŠ©æ‰‹ã€ä»£ç åŠ©æ‰‹ï¼‰
- è‡ªåŠ¨åˆ›å»ºç¤ºä¾‹çŸ¥è¯†åº“ï¼ˆæŠ€æœ¯æ–‡æ¡£ã€äº§å“æ‰‹å†Œï¼‰
- è‡ªåŠ¨åˆ›å»ºç¤ºä¾‹å·¥å…·ï¼ˆç½‘é¡µæœç´¢ã€æ–‡ä»¶è¯»å–ã€ä»£ç æ‰§è¡Œï¼‰
- åœ¨ daemon å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–

### 3. Agent ç®¡ç† - å®Œæ•´å®ç°
**æ–‡ä»¶**: `desktop/engine/core/agent/agent_management_ipc.py`

#### å®ç°çš„åŠŸèƒ½
- âœ… `list_agents` - åˆ—å‡ºæ‰€æœ‰ Agentï¼Œæ”¯æŒè¿‡æ»¤å’Œåˆ†é¡µ
- âœ… `get_agent` - è·å– Agent è¯¦æƒ…
- âœ… `create_agent` - åˆ›å»ºæ–° Agent
- âœ… `update_agent` - æ›´æ–° Agent ä¿¡æ¯
- âœ… `delete_agent` - åˆ é™¤ Agent

#### æ•°æ®ç»“æ„
```json
{
  "id": "uuid",
  "name": "Agentåç§°",
  "description": "æè¿°",
  "type": "basic|react|deep_research",
  "llm_config": {
    "model": "gpt-3.5-turbo",
    "temperature": 0.7,
    "max_tokens": 2000
  },
  "system_prompt": "ç³»ç»Ÿæç¤ºè¯",
  "knowledge_base_ids": [],
  "tool_ids": [],
  "created_at": "ISOæ—¶é—´",
  "updated_at": "ISOæ—¶é—´"
}
```

### 4. çŸ¥è¯†åº“ç®¡ç† - å®Œæ•´å®ç°
**æ–‡ä»¶**: `desktop/engine/core/service/kb_management_ipc.py`

#### å®ç°çš„åŠŸèƒ½
- âœ… `list_knowledge_bases` - åˆ—å‡ºæ‰€æœ‰çŸ¥è¯†åº“
- âœ… `get_knowledge_base` - è·å–çŸ¥è¯†åº“è¯¦æƒ…
- âœ… `create_knowledge_base` - åˆ›å»ºæ–°çŸ¥è¯†åº“
- âœ… `update_knowledge_base` - æ›´æ–°çŸ¥è¯†åº“ä¿¡æ¯
- âœ… `delete_knowledge_base` - åˆ é™¤çŸ¥è¯†åº“
- âœ… `list_documents` - åˆ—å‡ºæ–‡æ¡£ï¼ˆå ä½ç¬¦ï¼‰

#### æ•°æ®ç»“æ„
```json
{
  "id": "uuid",
  "name": "çŸ¥è¯†åº“åç§°",
  "description": "æè¿°",
  "embedding_model": "text-embedding-ada-002",
  "chunk_size": 1000,
  "chunk_overlap": 200,
  "document_count": 0,
  "total_size": 0,
  "created_at": "ISOæ—¶é—´",
  "updated_at": "ISOæ—¶é—´"
}
```

### 5. å·¥å…·ç®¡ç† - å®Œæ•´å®ç°
**æ–‡ä»¶**: `desktop/engine/core/service/tool_management_ipc.py`

#### å®ç°çš„åŠŸèƒ½
- âœ… `list_tools` - åˆ—å‡ºæ‰€æœ‰å·¥å…·ï¼Œæ”¯æŒè¿‡æ»¤
- âœ… `get_tool` - è·å–å·¥å…·è¯¦æƒ…
- âœ… `update_tool` - æ›´æ–°å·¥å…·é…ç½®
- âœ… `call_tool` - è°ƒç”¨å·¥å…·ï¼ˆåŸºç¡€å®ç°ï¼‰

#### æ•°æ®ç»“æ„
```json
{
  "id": "uuid",
  "name": "å·¥å…·åç§°",
  "description": "æè¿°",
  "type": "api|builtin|workflow",
  "category": "search|file|code",
  "is_enabled": true,
  "usage_count": 0,
  "success_rate": 0.0,
  "parameters_schema": {},
  "approval_policy": "none|optional|required",
  "created_at": "ISOæ—¶é—´",
  "updated_at": "ISOæ—¶é—´"
}
```

### 6. å‰ç«¯æœåŠ¡å±‚
**æ–‡ä»¶**: 
- `desktop/frontend/src/services/agentApi.ts` - Agent API
- `desktop/frontend/src/services/knowledgeBaseApi.ts` - çŸ¥è¯†åº“ API
- `desktop/frontend/src/services/toolApi.ts` - å·¥å…· API

#### ç‰¹ç‚¹
- æ‰€æœ‰æ–¹æ³•ä½¿ç”¨ Tauri IPC è°ƒç”¨
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- å®Œæ•´çš„ç±»å‹å®šä¹‰
- é‡æ–°å¯¼å‡ºæœºåˆ¶ï¼ˆagentApi å¯¼å‡ºå…¶ä»– APIï¼‰

### 7. Rust Tauri å‘½ä»¤
**æ–‡ä»¶**: `desktop/frontend/src-tauri/src/commands.rs`

#### å·²æ³¨å†Œçš„å‘½ä»¤ï¼ˆ45+ï¼‰
- Agent ç®¡ç†ï¼š5 ä¸ªå‘½ä»¤
- çŸ¥è¯†åº“ç®¡ç†ï¼š6 ä¸ªå‘½ä»¤
- å·¥å…·ç®¡ç†ï¼š4 ä¸ªå‘½ä»¤
- å¯¹è¯ç®¡ç†ï¼š3 ä¸ªå‘½ä»¤
- å½•åˆ¶å™¨ï¼š5 ä¸ªå‘½ä»¤
- å·¥ä½œæµï¼š4 ä¸ªå‘½ä»¤
- GUI è‡ªåŠ¨åŒ–ï¼š3 ä¸ªå‘½ä»¤
- ç³»ç»Ÿï¼š3 ä¸ªå‘½ä»¤

### 8. Python IPC å‡½æ•°æ˜ å°„
**æ–‡ä»¶**: `desktop/engine/daemon.py`

#### FUNCTION_MAP åŒ…å«
- Agent å¯¹è¯ï¼š3 ä¸ªå‡½æ•°
- Agent ç®¡ç†ï¼š5 ä¸ªå‡½æ•°
- çŸ¥è¯†åº“æ£€ç´¢ï¼š4 ä¸ªå‡½æ•°
- çŸ¥è¯†åº“ç®¡ç†ï¼š6 ä¸ªå‡½æ•°
- å·¥å…·ç®¡ç†ï¼š4 ä¸ªå‡½æ•°
- GUI è‡ªåŠ¨åŒ–ï¼š4 ä¸ªå‡½æ•°
- å·¥ä½œæµï¼š4 ä¸ªå‡½æ•°
- å½•åˆ¶å™¨ï¼š5 ä¸ªå‡½æ•°

## ğŸ¯ åŠŸèƒ½éªŒè¯

### Agent ä¸­å¿ƒ
1. âœ… å¯åŠ¨åº”ç”¨ï¼Œè¿›å…¥ Agent ä¸­å¿ƒ
2. âœ… åº”è¯¥èƒ½çœ‹åˆ° 2 ä¸ªç¤ºä¾‹ Agentï¼ˆé€šç”¨åŠ©æ‰‹ã€ä»£ç åŠ©æ‰‹ï¼‰
3. âœ… å¯ä»¥åˆ›å»ºæ–° Agent
4. âœ… å¯ä»¥ç¼–è¾‘ Agent
5. âœ… å¯ä»¥åˆ é™¤ Agent

### çŸ¥è¯†åº“ç®¡ç†
1. âœ… è¿›å…¥çŸ¥è¯†åº“ç®¡ç†é¡µé¢
2. âœ… åº”è¯¥èƒ½çœ‹åˆ° 2 ä¸ªç¤ºä¾‹çŸ¥è¯†åº“ï¼ˆæŠ€æœ¯æ–‡æ¡£ã€äº§å“æ‰‹å†Œï¼‰
3. âœ… å¯ä»¥åˆ›å»ºæ–°çŸ¥è¯†åº“
4. âœ… å¯ä»¥åˆ é™¤çŸ¥è¯†åº“

### å·¥å…·å•†åº—
1. âœ… è¿›å…¥å·¥å…·å•†åº—é¡µé¢
2. âœ… åº”è¯¥èƒ½çœ‹åˆ° 3 ä¸ªç¤ºä¾‹å·¥å…·ï¼ˆç½‘é¡µæœç´¢ã€æ–‡ä»¶è¯»å–ã€ä»£ç æ‰§è¡Œï¼‰
3. âœ… å¯ä»¥å¯ç”¨/ç¦ç”¨å·¥å…·
4. âœ… å¯ä»¥ä¿®æ”¹å·¥å…·æƒé™ç­–ç•¥

## ğŸ“Š æ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å‰ç«¯ React é¡µé¢                  â”‚
â”‚  - AgentListPage                        â”‚
â”‚  - KnowledgeBaseListPage                â”‚
â”‚  - ToolStorePage                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å‰ç«¯æœåŠ¡å±‚                       â”‚
â”‚  - agentApi.ts                          â”‚
â”‚  - knowledgeBaseApi.ts                  â”‚
â”‚  - toolApi.ts                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ invoke()
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Rust Tauri å‘½ä»¤å±‚                   â”‚
â”‚  - commands.rs (45+ å‘½ä»¤)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ stdin/stdout IPC
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Python Daemon                      â”‚
â”‚  - daemon.py (å‡½æ•°æ˜ å°„)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Python IPC å‡½æ•°å±‚                   â”‚
â”‚  - agent_management_ipc.py              â”‚
â”‚  - kb_management_ipc.py                 â”‚
â”‚  - tool_management_ipc.py               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æ•°æ®æŒä¹…åŒ–å±‚                        â”‚
â”‚  - simple_db.py (JSON å­˜å‚¨)             â”‚
â”‚  - ä½ç½®: ~/.jarvis/data/db.json         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¯åŠ¨åº”ç”¨

```bash
cd desktop
npm start
```

åº”ç”¨å°†ï¼š
1. âœ… è‡ªåŠ¨å¯åŠ¨ Python daemon
2. âœ… è‡ªåŠ¨åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®ï¼ˆé¦–æ¬¡å¯åŠ¨ï¼‰
3. âœ… å¯åŠ¨ Tauri å‰ç«¯
4. âœ… æ‰€æœ‰åŠŸèƒ½å¯ç”¨

## ğŸ“ æ•°æ®æ–‡ä»¶ä½ç½®

- **æ•°æ®åº“**: `~/.jarvis/data/db.json`
- **æ—¥å¿—**: `~/.jarvis/logs/engine.log`

## ğŸŠ æ€»ç»“

- âœ… 45+ Tauri å‘½ä»¤å…¨éƒ¨å®ç°
- âœ… 35+ Python IPC å‡½æ•°å…¨éƒ¨å®ç°
- âœ… å®Œæ•´çš„æ•°æ®æŒä¹…åŒ–
- âœ… ç¤ºä¾‹æ•°æ®è‡ªåŠ¨åˆå§‹åŒ–
- âœ… å‰ç«¯åˆ°åç«¯å…¨é“¾è·¯æ‰“é€š
- âœ… æ‰€æœ‰é¡µé¢åŠŸèƒ½æ­£å¸¸

**ç°åœ¨å¯åŠ¨åº”ç”¨ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½åº”è¯¥æ­£å¸¸å·¥ä½œï¼** ğŸ‰
